<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hogwarts Cinema</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            /* Mistik Hogwarts foni uchun ranglar */
            --bg-grad-1: #0b1320;
            --bg-grad-2: #000000;
            --text-color: #e0e6ed;
            --neon-blue: #4da6ff;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            /* Sirli, qorong'u radial gradient (sehrli atmosfera) */
            background: radial-gradient(circle at 50% 5%, var(--bg-grad-1) 0%, var(--bg-grad-2) 100%);
            color: var(--text-color); 
            margin: 0; padding: 15px; text-align: center;
            min-height: 100vh;
        }
        
        h2 { 
            font-weight: 800; text-transform: uppercase; letter-spacing: 2px; 
            margin-bottom: 30px; 
            text-shadow: 0 0 10px rgba(255,255,255,0.2);
        }
        
        /* 1-QAVAT: TIL TANLASH (Mistika va Shisha effekti) */
        #lang-screen { 
            display: flex; flex-direction: column; gap: 20px; 
            margin-top: 60px; padding: 0 15px;
        }
        .lang-btn {
            /* Glassmorphism (Shisha) dizayni */
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 16px;
            padding: 22px; 
            font-size: 18px; font-weight: bold; color: white;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        
        /* Barmoq tekkanda sehrli porlash effekti */
        .lang-btn:active { 
            background: rgba(77, 166, 255, 0.1); 
            box-shadow: 0 0 20px rgba(77, 166, 255, 0.4); 
            border-color: var(--neon-blue);
            transform: scale(0.98);
        }

        /* 2-QAVAT: KATALOG */
        #catalog-screen { display: none; padding-bottom: 30px;}
        .back-btn {
            background: rgba(255, 255, 255, 0.05); 
            border: 1px solid rgba(255, 255, 255, 0.2); 
            color: #aaa;
            padding: 10px 20px; border-radius: 12px; margin-bottom: 25px; cursor: pointer;
            transition: 0.2s;
        }
        .back-btn:active { background: rgba(255, 255, 255, 0.1); color: white;}
        
        .catalog-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px;
        }
        .movie-card { 
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px; overflow: hidden;
            display: flex; flex-direction: column; padding-bottom: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }
        .movie-card img { 
            width: 100%; aspect-ratio: 2 / 3; object-fit: cover; display: block; margin-bottom: 12px;
        }
        .movie-title { 
            font-size: 13px; font-weight: bold; margin: 0 5px 12px 5px; 
            height: 32px; overflow: hidden; color: #ddd;
        }
        .play-btn { 
            background: var(--neon-blue); color: #000; border: none;
            padding: 12px; border-radius: 10px; font-weight: 900; 
            width: 85%; margin: 0 auto; cursor: pointer;
            box-shadow: 0 0 10px rgba(77, 166, 255, 0.3);
            transition: 0.2s;
        }
        .play-btn:active { transform: scale(0.95); box-shadow: 0 0 20px rgba(77, 166, 255, 0.6); }
    </style>
</head>
<body>

    <div id="lang-screen">
        <h2>Tilni tanlang</h2>
        <button class="lang-btn" onclick="openCatalog('uz')">üá∫üáø O'zbek tili</button>
        <button class="lang-btn" onclick="openCatalog('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π —è–∑—ã–∫</button>
        <button class="lang-btn" onclick="openCatalog('en')">üá¨üáß English</button>
    </div>

    <div id="catalog-screen">
        <button class="back-btn" onclick="goBack()">üîô Tilni o'zgartirish</button>
        <h2 id="catalog-title">Katalog</h2>
        <div class="catalog-grid" id="grid"></div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        let currentLang = 'uz';

        // Tizimli yondashuv: Kinolar haqida baza
        const movies = [
            { id: "hp1", title_uz: "Falsafa Toshi", title_ru: "–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–π –∫–∞–º–µ–Ω—å", title_en: "Philosopher's Stone" },
            { id: "hp2", title_uz: "Maxfiy Hujra", title_ru: "–¢–∞–π–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞", title_en: "Chamber of Secrets" },
            { id: "hp3", title_uz: "Azkaban Mahbusi", title_ru: "–£–∑–Ω–∏–∫ –ê–∑–∫–∞–±–∞–Ω–∞", title_en: "Prisoner of Azkaban" },
            { id: "hp4", title_uz: "Olovli Kubok", title_ru: "–ö—É–±–æ–∫ –æ–≥–Ω—è", title_en: "Goblet of Fire" },
            { id: "hp5", title_uz: "Feniks Jamiyati", title_ru: "–û—Ä–¥–µ–Ω –§–µ–Ω–∏–∫—Å–∞", title_en: "Order of the Phoenix" },
            { id: "hp6", title_uz: "Chalasang Shahzoda", title_ru: "–ü—Ä–∏–Ω—Ü-–ø–æ–ª—É–∫—Ä–æ–≤–∫–∞", title_en: "Half-Blood Prince" },
            { id: "hp7", title_uz: "Ajal Tuhfasi 1", title_ru: "–î–∞—Ä—ã –°–º–µ—Ä—Ç–∏ 1", title_en: "Deathly Hallows 1" },
            { id: "hp8", title_uz: "Ajal Tuhfasi 2", title_ru: "–î–∞—Ä—ã –°–º–µ—Ä—Ç–∏ 2", title_en: "Deathly Hallows 2" }
        ];

        function openCatalog(lang) {
            currentLang = lang;
            document.getElementById('lang-screen').style.display = 'none';
            document.getElementById('catalog-screen').style.display = 'block';
            
            // Sarlavhani tilga moslash
            if(lang === 'uz') document.getElementById('catalog-title').innerText = "üé¨ O'zbekcha Katalog";
            if(lang === 'ru') document.getElementById('catalog-title').innerText = "üé¨ –ö–∞—Ç–∞–ª–æ–≥ –Ω–∞ —Ä—É—Å—Å–∫–æ–º";
            if(lang === 'en') document.getElementById('catalog-title').innerText = "üé¨ English Catalog";

            renderMovies();
        }

        function goBack() {
            document.getElementById('catalog-screen').style.display = 'none';
            document.getElementById('lang-screen').style.display = 'flex';
        }

        function renderMovies() {
            const grid = document.getElementById('grid');
            grid.innerHTML = ''; // Ekranni tozalash

            movies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                
                // MANTIQ: ID va Tilni birlashtirib rasmni topish (Masalan: img/hp1_uz.jpg)
                let imagePath = `img/${movie.id}_${currentLang}.jpg`;
                
                // Tilga mos nomni tanlash
                let title = currentLang === 'uz' ? movie.title_uz : (currentLang === 'ru' ? movie.title_ru : movie.title_en);
                let btnText = currentLang === 'uz' ? "Ko'rish" : (currentLang === 'ru' ? "–°–º–æ—Ç—Ä–µ—Ç—å" : "Watch");

                card.innerHTML = `
                    <img src="${imagePath}" alt="${title}" onerror="this.src='https://via.placeholder.com/150?text=Poster+Topilmadi'">
                    <p class="movie-title">${title}</p>
                    <button class="play-btn" onclick="requestMovie('${movie.id}_${currentLang}')">‚ñ∂ ${btnText}</button>
                `;
                grid.appendChild(card);
            });
        }

        function requestMovie(payload) {
            let botUsername = "garripotterkinobot"; // O'zingnikini tekshirib qo'y
            let link = `https://t.me/${botUsername}?start=${payload}`;
            tg.openTelegramLink(link);
            tg.close();
        }
    </script>
</body>
</html>


